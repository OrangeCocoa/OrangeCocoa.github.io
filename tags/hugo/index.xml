<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>HUGO on 天上天下唯我独尊備忘録雑記メモ覚書</title><link>https://OrangeCocoa.github.io/tags/hugo/</link><description>Recent content in HUGO on 天上天下唯我独尊備忘録雑記メモ覚書</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Tue, 27 Aug 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://OrangeCocoa.github.io/tags/hugo/index.xml" rel="self" type="application/rss+xml"/><item><title>HUGO備忘録</title><link>https://OrangeCocoa.github.io/posts/2024/08_27_hugo%E5%82%99%E5%BF%98%E9%8C%B2/</link><pubDate>Tue, 27 Aug 2024 00:00:00 +0000</pubDate><guid>https://OrangeCocoa.github.io/posts/2024/08_27_hugo%E5%82%99%E5%BF%98%E9%8C%B2/</guid><description>HUGOの備忘録
躓きそうなことがあれば、ここに追記していき、都度個別記事化する。
ファイル分割先でグローバル変数を使う ファイル分割した際、{{ partial &amp;quot;header.html&amp;quot; . }}のように呼び出すが、
このとき . を書き忘れると、分割先のファイル内でグローバル変数が使えなくなる。
引数渡しみたいなことをしてるっぽい。
タクソノミー用のランディングページを作成する ここの layouts/_default/taxonomy.htmlテンプレートで /tags/index.htmlを作成したときのテンプレートを、
layouts/_default/term.htmlテンプレートで /tags/[タグ名]/index.htmlを作成したときのテンプレートを作ることができる。
これを作成していないと、list.htmlがテンプレートとして認識されてしまうため注意。
サイト内検索導入 pagefindを使った。
ビルドコンフィグのHUGOビルド後に下記処理を追加。
- name: Run pagefind working-directory: ./ run: &amp;#34;npx pagefind --site public&amp;#34; その後、検索窓を表示させたいページで適当にレイアウトを作成して、下記を記載する。
{{- $page := .Site.GetPage &amp;#34;/&amp;#34; -}} &amp;lt;link href=&amp;#34;{{- $page.RelPermalink -}}pagefind/pagefind-ui.css&amp;#34; rel=&amp;#34;stylesheet&amp;#34;&amp;gt; &amp;lt;script src=&amp;#34;{{- $page.RelPermalink -}}pagefind/pagefind-ui.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;div id=&amp;#34;search&amp;#34;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;script&amp;gt; window.addEventListener(&amp;#39;DOMContentLoaded&amp;#39;, (event) =&amp;gt; { new PagefindUI({ element: &amp;#34;#search&amp;#34;, showSubResults: true }); }); &amp;lt;/script&amp;gt;</description></item><item><title>HUGO＋GitHubPagesデプロイ時にDartSassを使う</title><link>https://OrangeCocoa.github.io/posts/2024/08_26_hugo_githubpages%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E6%99%82%E3%81%ABdartsass%E3%82%92%E4%BD%BF%E3%81%86/</link><pubDate>Mon, 26 Aug 2024 00:00:00 +0000</pubDate><guid>https://OrangeCocoa.github.io/posts/2024/08_26_hugo_githubpages%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E6%99%82%E3%81%ABdartsass%E3%82%92%E4%BD%BF%E3%81%86/</guid><description>ワークフロー内チェックアウト前に以下の処理を記述することで、実行環境でDartSassのコンパイルが実行できるようになります。
- name: Install Dart Sass run: sudo snap install dart-sass 最終的には以下のようになります。
config.yml
name: github pages on: push: branches: - master # Actionタブからこのワークフローを手動で実行できる workflow_dispatch: jobs: deploy: runs-on: ubuntu-latest steps: - name: Install Dart Sass run: sudo snap install dart-sass - name: Checkout uses: actions/checkout@v3 with: submodules: true fetch-depth: 0 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: &amp;#39;latest&amp;#39; extended: true # 拡張機能にアクセスするか - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: deploy_key: ${{ secrets.</description></item><item><title>HUGO＋GitHubPagesデプロイ時にLibSassを使う</title><link>https://OrangeCocoa.github.io/posts/2024/08_25_hugo_githubpages%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E6%99%82%E3%81%ABlibsass%E3%82%92%E4%BD%BF%E3%81%86/</link><pubDate>Sun, 25 Aug 2024 00:00:00 +0000</pubDate><guid>https://OrangeCocoa.github.io/posts/2024/08_25_hugo_githubpages%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E6%99%82%E3%81%ABlibsass%E3%82%92%E4%BD%BF%E3%81%86/</guid><description>GitHubPages構築にGitHubActionsを使ってデプロイしていますが、scssを使って記述したcssをGitHub上でコンパイルするため行なった対応です。
LibSassは現在公式から非推奨となっていますが、対応した事例が英語のディスカッションでしかなかったため、DartSassに移行する前にひとまず対応してみました。
てきとうに作ったscssファイルを resources.ToCSSで変換する処理を普通に書きます。
&amp;lt;head&amp;gt;タグ内
{{ $options := (dict &amp;#34;transpiler&amp;#34; &amp;#34;libsass&amp;#34; &amp;#34;targetPath&amp;#34; &amp;#34;css/style.css&amp;#34;) }} {{ with resources.Get &amp;#34;css/tekitou.scss&amp;#34; | toCSS $options | minify }} &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; type=&amp;#34;text/css&amp;#34; href=&amp;#34;{{ .RelPermalink }}&amp;#34; integrity=&amp;#34;{{ .Data.Integrity }}&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt; ワークフロー内でHUGOをセットアップする処理の中にextended: trueの記述を追加します。
これはHUGOの拡張バージョンを使用するように設定するものですが、LibSassトランスパイラは拡張版に含まれるものであるとドキュメントに明記しているため、
初期値falseのままではLibSassを利用できません。
config.yml
name: github pages on: push: branches: - master # Actionタブからこのワークフローを手動で実行できる workflow_dispatch: jobs: deploy: runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v3 with: submodules: true fetch-depth: 0 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: &amp;#39;latest&amp;#39; extended: true # 拡張機能にアクセスするか - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: deploy_key: ${{ secrets.</description></item><item><title>HUGO＋GitHubPages＋GitHubActionsでWebサイトを公開しよう</title><link>https://OrangeCocoa.github.io/posts/2024/08_02_hugo_githubpages_githubactions%E3%81%A7web%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%97%E3%82%88%E3%81%86/</link><pubDate>Fri, 02 Aug 2024 00:00:00 +0000</pubDate><guid>https://OrangeCocoa.github.io/posts/2024/08_02_hugo_githubpages_githubactions%E3%81%A7web%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%97%E3%82%88%E3%81%86/</guid><description>Webページ作成はHTMLべた書きでめんどくさくて時間もかかるし大して面白くない、レンダリングエンジン作る方が面白そう、とそんなイメージを持っていましたが、
HUGOとGitHubActionsを使って公開まで自動化ができるというのを見て興味が出る。
この記事は実際にデプロイして公開までやってみた備忘録になります。
現時点でWebの知識もお金も全くないです。
公開先をGitHub PagesにするかNetlifyにするかで迷いましたが、いろいろとめんどくさくないGitHubPagesに決定。
ブログっぽいものとして最低限必要な要素を解説していきます。
注意点ですが、GitHub Pagesはアフィリエイトなどの運用は恐らく認められていません。
GitHubでソースコード公開してるので、気になったら参考にどうぞ。
https://github.com/OrangeCocoa/Hugo_OrangeCocoa.github.io
クイックスタートガイドはここ
HUGOでよく使うGoテンプレートの基本構文はここ
（リンクを英語ドキュメントから日本語ドキュメントに差し替えましたが、一部翻訳ページがないものもあります）
目次
HUGOのインストール HUGOのセットアップ シングルページとリストページの作成 TOPページの作成 GitHub リポジトリの作成と、GitHub Actionsへのフック デプロイエラー解決 画像の挿入 コメント欄の追加 Markdownの変換挙動をカスタマイズする リンクを別タブで開く Markdown内でmermaid記法を使う Markdown内でCSS定義したスタイルを使う Markdown内でGoAT記法を使う Google検索結果に表示させる HUGOのインストール ここからDL
Windowsなので
winget install Hugo.Hugo.Extended
でインストール。
環境変数に登録までされるので、これが一番楽。
HUGOのセットアップ コマンドプロンプトを開き、
# カレントディレクトリにHugoのプロジェクトが新規作成される hugo new site [Hugoプロジェクト名] cd [Hugoプロジェクト名] # HTMLのビルド hugo # ローカルサーバー起動 hugo server hugo new site でいくつかフォルダが作られるが、よく使うのはcontent, layouts, staticの三つ。
またhugo.tomlはプロジェクトの設定ファイルになるので、これもよく編集します。
フォルダ構成はこんな感じ。
p r o j e c t a a c d l s t h r s o a a t h u c s n t y a e g h e t a o t m o e t e u i e .</description></item></channel></rss>