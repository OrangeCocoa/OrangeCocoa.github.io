<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="h63xtNzB2lPdUWJQuarTUFRI-4cuaBkepZGUMW11GCw"><link rel=stylesheet type=text/css href=/css/bulma.css integrity crossorigin=anonymous><link rel=stylesheet type=text/css href=/css/style.min.css integrity crossorigin=anonymous><title>HUGO備忘録 | 天上天下唯我独尊備忘録雑記メモ覚書</title>
<meta property="og:title" content="HUGO備忘録 - 天上天下唯我独尊備忘録雑記メモ覚書"><meta property="og:type" content="article"></head><body><section class="hero is-dark shadow-hero"><div class=header-container><header><div class=header-title>天上天下唯我独尊備忘録雑記メモ覚書</div></header></div></section><section><nav id=global-navi-bg><ul id=global-navi><li><a id=navi-item href=/ title=index>TOP</a></li><li><a id=navi-item href=/nav/archives/ title=archives>Archives</a></li><li><a id=navi-item href=/tags/ title=tags>Tags</a></li><li><a id=navi-item href=/nav/about/ title=about>About</a></li><li><a id=navi-item href=/nav/search/ title=search>Search</a></li></ul></nav></section><section id=main><section class=section><div class=container><div class=page-contents-date>2024.08.27</div><div class=page-contents-title>HUGO備忘録</div><div><a href=https://OrangeCocoa.github.io//tags/hugo>#HUGO</a></div><div class=page-contents-body><p>HUGOの備忘録<br>躓きそうなことがあれば、ここに追記していき、都度個別記事化する。</p><hr><h3 id=ファイル分割先でグローバル変数を使う class="title is-3">ファイル分割先でグローバル変数を使う</h3><p>ファイル分割した際、<code>{{ partial "header.html" . }}</code>のように呼び出すが、<br>このとき <code>.</code> を書き忘れると、分割先のファイル内でグローバル変数が使えなくなる。<br>引数渡しみたいなことをしてるっぽい。</p><hr><h3 id=タクソノミー用のランディングページを作成する class="title is-3">タクソノミー用のランディングページを作成する</h3><p><a href=https://juggernautjp.info/content-management/taxonomies/#default-taxonomies target=_blank rel=noopener>ここ</a>の
<strong>layouts/_default/taxonomy.html</strong>テンプレートで <strong>/tags/index.html</strong>を作成したときのテンプレートを、<br><strong>layouts/_default/term.html</strong>テンプレートで <strong>/tags/[タグ名]/index.html</strong>を作成したときのテンプレートを作ることができる。</p><br><p>これを作成していないと、list.htmlがテンプレートとして認識されてしまうため注意。</p><hr><h3 id=サイト内検索導入 class="title is-3">サイト内検索導入</h3><p><a href=https://pagefind.app/ target=_blank rel=noopener>pagefind</a>を使った。<br>ワークフローのHUGOビルド後に下記処理を追加。</p><br><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-config.yml data-lang=config.yml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Run pagefind</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>./</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>run</span>: <span style=color:#e6db74>&#34;npx pagefind --site public&#34;</span>
</span></span></code></pre></div><br><p>その後、検索窓を表示させたいページで適当にレイアウトを作成して、下記を記載する。</p><br><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-single.html data-lang=single.html><span style=display:flex><span>{{- $page := .Site.GetPage &#34;/&#34; -}}
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{- $page.RelPermalink -}}pagefind/pagefind-ui.css&#34;</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{- $page.RelPermalink -}}pagefind/pagefind-ui.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;search&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;DOMContentLoaded&#39;</span>, (<span style=color:#a6e22e>event</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PagefindUI</span>({ <span style=color:#a6e22e>element</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;#search&#34;</span>, <span style=color:#a6e22e>showSubResults</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div></div><script src=https://giscus.app/client.js data-repo=OrangeCocoa/OrangeCocoa.github.io data-repo-id=R_kgDOMekbMw data-category=Announcements data-category-id=DIC_kwDOMekbM84ChcLc data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=ja data-loading=lazy crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the comments powered by giscus.</noscript></div></section></section><footer class=footer><div class="content has-text-centered">© 2024 OrangeCocoa All rights reserved.</div></footer><script src=https://OrangeCocoa.github.io/js/vanilla-back-to-top.min.js></script><script>addBackToTop({diameter:56,backgroundColor:"rgb(170, 170, 170)",textColor:"#fff"})</script></body></html>